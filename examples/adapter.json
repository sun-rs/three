{
  "adapters": {
    "codex": {
      "filesystem_capabilities": ["read-only", "read-write"],
      "args_template": [
        "exec",
        "{% if capabilities.filesystem == 'read-only' %}--sandbox{% endif %}",
        "{% if capabilities.filesystem == 'read-only' %}read-only{% endif %}",
        "{% if capabilities.filesystem == 'read-write' %}--sandbox{% endif %}",
        "{% if capabilities.filesystem == 'read-write' %}workspace-write{% endif %}",
        "{% if capabilities.filesystem == 'danger-full-access' %}--sandbox{% endif %}",
        "{% if capabilities.filesystem == 'danger-full-access' %}danger-full-access{% endif %}",
        "{% if not session_id and model != 'default' %}--model{% endif %}",
        "{% if not session_id and model != 'default' %}{{ model }}{% endif %}",
        "{% if session_id and model != 'default' %}-c{% endif %}",
        "{% if session_id and model != 'default' %}model={{ model }}{% endif %}",
        "{% if options.model_reasoning_effort %}-c{% endif %}",
        "{% if options.model_reasoning_effort %}model_reasoning_effort={{ options.model_reasoning_effort }}{% endif %}",
        "{% if options.text_verbosity %}-c{% endif %}",
        "{% if options.text_verbosity %}text_verbosity={{ options.text_verbosity }}{% endif %}",
        "--skip-git-repo-check",
        "{% if not session_id %}-C{% endif %}",
        "{% if not session_id %}{{ workdir }}{% endif %}",
        "--json",
        "{% if session_id %}resume{% endif %}",
        "{% if session_id %}{{ session_id }}{% endif %}",
        "{% if prompt %}{{ prompt }}{% endif %}"
      ],
      "output_parser": {
        "type": "json_stream",
        "session_id_path": "thread_id",
        "message_path": "item.text",
        "pick": "last"
      }
    },
    "claude": {
      "filesystem_capabilities": ["read-only", "read-write"],
      "args_template": [
        "--print",
        "{{ prompt }}",
        "--output-format",
        "json",
        "{% if model != 'default' %}--model{% endif %}",
        "{% if model != 'default' %}{{ model }}{% endif %}",
        "{% if capabilities.filesystem == 'read-write' %}--dangerously-skip-permissions{% endif %}",
        "{% if capabilities.filesystem == 'read-only' %}--permission-mode{% endif %}",
        "{% if capabilities.filesystem == 'read-only' %}plan{% endif %}",
        "{% if session_id %}--resume{% endif %}",
        "{% if session_id %}{{ session_id }}{% endif %}"
      ],
      "output_parser": {
        "type": "json_object",
        "session_id_path": "session_id",
        "message_path": "result"
      }
    },
    "gemini": {
      "filesystem_capabilities": ["read-only", "read-write"],
      "args_template": [
        "--output-format",
        "json",
        "{% if capabilities.filesystem == 'read-only' %}--approval-mode{% endif %}",
        "{% if capabilities.filesystem == 'read-only' %}plan{% endif %}",
        "{% if capabilities.filesystem != 'read-only' %}-y{% endif %}",
        "{% if model != 'default' %}-m{% endif %}",
        "{% if model != 'default' %}{{ model }}{% endif %}",
        "{% if capabilities.filesystem == 'read-only' %}--sandbox{% endif %}",
        "{% if include_directories %}--include-directories{% endif %}",
        "{{ include_directories }}",
        "{% if session_id %}--resume{% endif %}",
        "{% if session_id %}{{ session_id }}{% endif %}",
        "--prompt",
        "{{ prompt }}"
      ],
      "output_parser": {
        "type": "json_object",
        "session_id_path": "session_id",
        "message_path": "response"
      }
    },
    "opencode": {
      "filesystem_capabilities": ["read-write"],
      "args_template": [
        "run",
        "{% if model != 'default' %}-m{% endif %}",
        "{% if model != 'default' %}{{ model }}{% endif %}",
        "{% if session_id %}-s{% endif %}",
        "{% if session_id %}{{ session_id }}{% endif %}",
        "--format",
        "json",
        "{{ prompt }}"
      ],
      "output_parser": {
        "type": "json_stream",
        "session_id_path": "part.sessionID",
        "message_path": "part.text",
        "pick": "last"
      }
    },
    "kimi": {
      "filesystem_capabilities": ["read-write"],
      "args_template": [
        "--print",
        "--thinking",
        "--output-format",
        "text",
        "--final-message-only",
        "--work-dir",
        "{{ workdir }}",
        "{% if model != 'default' %}--model{% endif %}",
        "{% if model != 'default' %}{{ model }}{% endif %}",
        "{% if session_id %}--session{% endif %}",
        "{% if session_id %}{{ session_id }}{% endif %}",
        "--prompt",
        "{% if capabilities.filesystem == 'read-only' %}{{ prompt }}\n不允许写文件{% else %}{{ prompt }}{% endif %}"
      ],
      "output_parser": {
        "type": "text"
      }
    }
  }
}
